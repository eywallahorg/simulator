<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Eywallah Sim</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #111; color: white; }
    #hud { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.6); padding: 10px; border-radius: 8px; z-index: 10; }
    #cityMenu { position: absolute; top: 60px; left: 10px; background: rgba(20,20,20,0.8); padding: 10px; border-radius: 8px; z-index: 10; max-height: 80vh; overflow-y: auto; }
    #cityMenu button { display: block; margin: 5px 0; width: 200px; padding: 8px; cursor: pointer; }
    #eventBox {
      position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
      background: rgba(0,0,0,0.85); padding: 15px; border-radius: 10px;
      display: none; flex-direction: column; align-items: center; justify-content: center;
      z-index: 100; min-width: 300px;
    }
    #eventBox button { margin: 5px; padding: 10px 15px; cursor: pointer; background-color: #4CAF50; color: white; border: none; border-radius: 5px; }
    #phone {
      position: absolute; bottom: 20px; right: 20px;
      width: 200px; height: 350px; background: #222; border-radius: 15px;
      border: 2px solid #555; z-index: 20; display: flex; flex-direction: column; justify-content: flex-start; padding: 10px;
    }
    #phone h3 { margin: 0; text-align: center; }
    #apps button { margin: 5px 0; padding: 8px; width: 100%; cursor: pointer; }
    #miniGame { position: absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); display:none; align-items:center; justify-content:center; flex-direction:column; color:white; z-index:200; }
    #miniGame button { margin-top:20px; padding:10px 20px; }
  </style>
</head>
<body>

  <div id="hud">
    <p>💰 Para: <span id="money">500</span></p>
    <p>🎂 Yaş: <span id="age">18</span></p>
    <p>🧠 Stres: <span id="stress">20</span></p>
  </div>

  <div id="cityMenu">
    <h3>Şehirde Yerler</h3>
    <button onclick="visit('banka')">🏦 Banka</button>
    <button onclick="visit('is')">💼 İş Merkezi</button>
    <button onclick="visit('galeri')">🚗 Araba Galerisi</button>
    <button onclick="visit('okul')">📚 Okul</button>
    <button onclick="visit('evlilik')">💍 Evlilik Dairesi</button>
    <button onclick="visit('market')">🛒 Market</button>
    <button onclick="visit('hastane')">🏥 Hastane</button>
  </div>

  <div id="eventBox">
    <p id="eventText">Olay...</p>
    <div>
      <button onclick="chooseOption(1)">Seçenek 1</button>
      <button onclick="chooseOption(2)">Seçenek 2</button>
    </div>
  </div>

  <!-- Telefon -->
  <div id="phone">
    <h3>📱 Telefon</h3>
    <div id="apps">
      <button onclick="openApp('borsa')">📊 Borsa</button>
      <button onclick="openApp('gorev')">📌 Görevler</button>
      <button onclick="openApp('mesaj')">💬 Mesajlar</button>
    </div>
    <div id="appContent" style="flex:1; overflow-y:auto; font-size:14px;"></div>
  </div>

  <!-- Mini Game -->
  <div id="miniGame">
    <h2 id="miniGameText">Mini Oyun</h2>
    <button onclick="finishMiniGame(true)">Başarılı!</button>
    <button onclick="finishMiniGame(false)">Başarısız!</button>
  </div>

<script>
  let gameData = { money: 500, age: 18, stress: 20, job: null, married: false };
  let currentEvent = null;

  function updateHUD() {
    document.getElementById("money").innerText = gameData.money;
    document.getElementById("age").innerText = gameData.age;
    document.getElementById("stress").innerText = gameData.stress;
  }

  // Şehir ziyaret
  function visit(place) {
    if (place === 'banka') {
      showEvent("Banka memuru: 'Mevduat hesabı açmak ister misiniz?'", 
        "Evet (Para kilitlenir, faiz gelir)", () => { gameData.money += 100; }, 
        "Hayır (Hiçbir şey olmaz)", () => {});
    }
    if (place === 'is') {
      showEvent("Patron: 'Bizimle çalışmak ister misin?'", 
        "Garsonluk", () => { gameData.job = "Garson"; giveTask("Müşterilere servis yap!"); }, 
        "Taksicilik", () => { gameData.job = "Taksi"; giveTask("Müşteri taşı!"); });
    }
    if (place === 'galeri') {
      showEvent("Galerici: 'Araba almak ister misin?'", 
        "Ucuz Araba (200₺)", () => { if(gameData.money>=200){gameData.money-=200;}}, 
        "Pahalı Araba (1000₺)", () => { if(gameData.money>=1000){gameData.money-=1000;}});
    }
    if (place === 'okul') {
      showEvent("Öğretmen: 'Ders çalışmak ister misin?'", 
        "Evet (Bilgi artar)", () => { gameData.stress += 5; }, 
        "Hayır (Stres yok)", () => {});
    }
    if (place === 'evlilik') {
      if (!gameData.married) {
        showEvent("Biriyle evlenmek ister misin?", 
          "Evet (Evlendin)", () => { gameData.married = true; }, 
          "Hayır", () => {});
      } else {
        showEvent("Zaten evlisin!", "Tamam", ()=>{}, "Boşan", ()=>{ gameData.married=false; });
      }
    }
    if (place === 'market') {
      showEvent("Market: Alışveriş yapmak ister misin?", 
        "Yemek al (50₺)", () => { gameData.money -= 50; gameData.stress -= 10; }, 
        "Hiçbir şey alma", () => {});
    }
    if (place === 'hastane') {
      showEvent("Doktor: 'Muayene olalım mı?'", 
        "Evet (Stres azalır)", () => { gameData.stress -= 20; gameData.money -= 100; }, 
        "Hayır", () => {});
    }
    updateHUD();
  }

  function showEvent(text, opt1Text, opt1Func, opt2Text, opt2Func) {
    currentEvent = { text, opt1Text, opt1Func, opt2Text, opt2Func };
    document.getElementById("eventText").innerText = text;
    document.querySelectorAll("#eventBox button")[0].innerText = opt1Text;
    document.querySelectorAll("#eventBox button")[1].innerText = opt2Text;
    document.getElementById("eventBox").style.display = "flex";
  }

  function chooseOption(num) {
    if (!currentEvent) return;
    if (num === 1) currentEvent.opt1Func();
    else currentEvent.opt2Func();
    document.getElementById("eventBox").style.display = "none";
    updateHUD();
    currentEvent = null;
  }

  // Telefon uygulamaları
  function openApp(app) {
    const appContent = document.getElementById("appContent");
    if (app === 'borsa') {
      let tl_usd = (20 + Math.random()*5).toFixed(2);
      let bist = (5000 + Math.random()*500).toFixed(0);
      appContent.innerHTML = `<p>💱 Dolar/TL: ${tl_usd}</p><p>📈 BIST100: ${bist}</p>`;
    }
    if (app === 'gorev') {
      if (gameData.job) {
        appContent.innerHTML = `<p>Mevcut işin: ${gameData.job}</p><button onclick="startMiniGame()">Görevi Oyna</button>`;
      } else {
        appContent.innerHTML = "<p>Henüz işin yok.</p>";
      }
    }
    if (app === 'mesaj') {
      appContent.innerHTML = "<p>Arkadaş: 'Akşam bara geliyoruz!'</p>";
    }
  }

  // Görev / mini oyun
  function giveTask(desc) {
    document.getElementById("appContent").innerHTML = `<p>Görev: ${desc}</p><button onclick="startMiniGame()">Mini Oyunu Başlat</button>`;
  }

  function startMiniGame() {
    document.getElementById("miniGame").style.display = "flex";
    document.getElementById("miniGameText").innerText = "Görev: Doğru zamanda butona bas!";
  }

  function finishMiniGame(success) {
    document.getElementById("miniGame").style.display = "none";
    if (success) {
      gameData.money += 200;
      gameData.stress -= 5;
    } else {
      gameData.money -= 50;
      gameData.stress += 10;
    }
    updateHUD();
  }

  updateHUD();
</script>
</body>
</html>
